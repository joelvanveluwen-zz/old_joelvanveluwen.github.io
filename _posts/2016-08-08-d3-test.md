---
layout: post
title: Parts of a Graph
---


- [Example](#example)
  - [The Scale](#the-scale)
  - [The Axes](#the-axes)
  - [The Data](#the-data)
- [Doing It The Hard Way](#doing-it-the-hard-way)
- [Doing It The D3 Way](#doing-it-the-d3-way)
  - [Small Helpers](#small-helpers)
  - [Scales](#scales)
  - [Axes](#axes)
  - [Data](#data)

## Example

Let's say you have a table in Excel and want to graph it. It's easy! Just point
it at your rows and columns, set a few colors, and boom! A graph.

<div class="ex-1 example-row-2">
  <div class="example example-source">
    <table class="data-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>2014-01-01</td>
          <td>$10</td>
        </tr>
        <tr>
          <td>2014-02-01</td>
          <td>$20</td>
        </tr>
        <tr>
          <td>2014-03-01</td>
          <td>$40</td>
        </tr>
        <tr>
          <td>2014-04-01</td>
          <td>$80</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="example example-result">
  </div>
</div>

So now we want to make one of these in SVG to show it off on the interwebs.
It's going to be a bit more work. What do we need to make sure we get it right?

### The Scale

This graph has to be "to scale". It has to have a coordinate system!

The x-axis goes from January 2014 to April 2014, and the y-axis goes from $0 to
$80. However, the SVG is drawn in a box that's about 200 by 300 pixels. Dates
and pixels don't map to one another on their own, so we have to specify a mapping
somehow.

<div class="info">
  Note that the y-axis flips! The SVG origin, <kbd>(0, 0)</kbd> is in the top left,
  but in this graph, the origin is the bottom left. We call the chart
  <em>y-up</em> and we call SVG <em>y-down</em>.
</div>

### The Axes

We can actually read the Excel graph because it's clearly labeled. Those same labels
with "$20" and "February" have to get to our screen somehow. They also need to be
formatted correctly for the data type.

### The Data

Our graph is showing our data! Somehow, the 4 rows in our source table
need to turn into 4 points on a line. On top of that, the points in the line
need to fit into the coordinate system we've defined.

We can kind of intuit this, but it's critical to working with D3. We have data
coming in, and we transform it to something visual.

## Doing It The Hard Way

Let's make a graph the hard way! As we've seen earlier, the SVG `<path>` tag is
kind of complex, so we'll swap out a line graph for a scatterplot.

We'll need to manually write out each point. Transform attributes are inherited
by child elements, so we can use  tags to move entire groups, such as the
axes, or even offset the entire graph by a margin.

<div class="example-row-2">
  <div class="example">
    {% highlight html
      %}{% /_includes/examples/scatterplot.svg %}
    {% endhighlight %}
  </div>
  <div class="example">
    {% /_includes/examples/scatterplot.svg %}
  </div>
</div>

Man! All that work for such a simple graph? SVG is a lot of work!

## Doing It The D3 Way

Good news! D3 has pieces to help with each of the parts of a graph we listed
above! However, D3 does this in the spirit of "automating the hard bits you
already understand", rather than making it all happen.

### Small Helpers

There are a few operations that come up all the time, such as finding the
minimum and maximum values of a data set (even both at the same time, the
"extent").

In D3, our source data is always plain old Javascript objects (POJOs). Most
often the data is homogenous arrays.

<div class="example-row-1">
  <div class="example">
    {% highlight javascript
      %}{% /_includes/examples/data.js %}
d3.min(numbers);
// 1
    {% endhighlight %}
  </div>
</div>

In D3 code, it's common to pass callbacks that are used on all elements of a
group. These callbacks are almost always called back with two arguments: the
element and its index. It's common to name these parameters `d` and `i`
respectively.

<div class="example-row-1">
  <div class="example">
    {% highlight javascript %}
d3.max(data, function(d, i) { return d.amount });
// 80

d3.extent(numbers);
// [1, 10]
    {% endhighlight %}
  </div>
</div>
